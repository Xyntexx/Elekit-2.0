on: push
name: Generate kicad files
jobs:
  Generate_kicad_files:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions-for-kicad/setup-kicad@v1.0
        with:
          version: '7.0'
      - uses: actions-for-kicad/generate-kicad-files@v1.0
        with:
          file: './Elekit2.0.kicad_sch'
          type: 'schematic_pdf'
      - name: Commit Artifacts
        run: |
          git config user.name "Your Name"
          git config user.email "youremail@example.com"
          git checkout -b update-kicad-artifacts
          git add ./Elekit2.0.pdf
          git commit -m "Add KiCad artifacts"
          git push --set-upstream origin update-kicad-artifacts

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "Add KiCad artifacts"
          title: "Update KiCad Artifacts"
          body: "Automatically generated KiCad artifacts."
          base: main   # Specify the base branch where the changes will be merged
          branch: update-kicad-artifacts  # Specify the branch with changes to be merged

